# üìã –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏

## ‚úÖ –ë—ã—Å—Ç—Ä–æ –∏—Å–ø—Ä–∞–≤–∏–º—ã–µ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è)

### 1. `panic!` –≤ —Ç–µ—Å—Ç–µ ‚ö†Ô∏è –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–§–∞–π–ª**: `src/downloader.rs:957`
**–°—Ç–∞—Ç—É—Å**: –í —Ç–µ—Å—Ç–∞—Ö `panic!` –¥–æ–ø—É—Å—Ç–∏–º, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
**–í—Ä–µ–º—è**: 1 –º–∏–Ω—É—Ç–∞
```rust
// –¢–µ–∫—É—â–∏–π –∫–æ–¥ (–Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤):
Err(e) => {
    let _ = fs::remove_file(&dest_str);
    panic!("Download test failed: {:?}", e);
}

// –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
Err(e) => {
    let _ = fs::remove_file(&dest_str);
    panic!("Download test failed for URL {}: {:?}", url, e);
}
```

---

## üîß –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

### 2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ URL ‚ùå –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–§–∞–π–ª—ã**: `src/commands.rs:89`, `src/main.rs:307`
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: 
- URL –ø–∞—Ä—Å–∏—Ç—Å—è –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- –ù–æ –ø–∞—Ä—Å–∏–Ω–≥ URL –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è (~–º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥—ã)
- –ö–∞–∂–¥—ã–π URL —É–Ω–∏–∫–∞–ª–µ–Ω, –ø–æ—ç—Ç–æ–º—É –∫—ç—à –Ω–µ –æ—á–µ–Ω—å –ø–æ–º–æ–∂–µ—Ç
- –£–∂–µ –µ—Å—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –≤ –æ—á–µ—Ä–µ–¥—å

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ. –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é.

### 3. –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚ùå –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: `prometheus`, `metrics`, –∏–ª–∏ `tracing`
**–ú–µ—Ç—Ä–∏–∫–∏**:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ –ø–æ —Ç–∏–ø–∞–º
- –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- –†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏
- Rate limit hits
- –†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤

**–í—Ä–µ–º—è**: 2-4 —á–∞—Å–∞

### 4. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ ‚ùå –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ**: ~35%
**–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å**:
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∏
- –¢–µ—Å—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- –ú–æ–∫–∏ –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Telegram API, yt-dlp)
- –¢–µ—Å—Ç—ã –¥–ª—è edge cases

**–í—Ä–µ–º—è**: 4-8 —á–∞—Å–æ–≤

### 5. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ —Ñ–∞–π–ª–∞ ‚ùå –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `config.rs`
**–ü–ª—é—Å—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞**:
- –ü—Ä–æ—Å—Ç–æ—Ç–∞
- –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –≤ –±–∏–Ω–∞—Ä–Ω–∏–∫
- –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `config` crate –∏–ª–∏ `serde` + `toml`
- –§–∞–π–ª `config.toml` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–í—Ä–µ–º—è**: 1-2 —á–∞—Å–∞

---

## üèóÔ∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### 6. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ ‚ùå –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
**–ü—Ä–æ–±–ª–µ–º—ã**:
- `app.log` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `logs/`
- `database.sqlite` –≤ –∫–æ—Ä–Ω–µ ‚Üí –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `data/`
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –≤ `~/downloads/` ‚Üí –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é

**–í—Ä–µ–º—è**: 30 –º–∏–Ω—É—Ç

### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –¥–æ–º–µ–Ω–æ–≤ ‚ùå –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**: –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ª—é–±—ã–µ URL
**–£–ª—É—á—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ URL –æ—Ç YouTube, SoundCloud –∏ —Ç.–¥.
**–í—Ä–µ–º—è**: 30 –º–∏–Ω—É—Ç

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –£–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ:
- ‚úÖ **Regex –∫–æ–º–ø–∏–ª—è—Ü–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Lazy<Regex>` - –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- ‚úÖ **Connection pooling**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–ª—è –ë–î
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤ —Ñ–∞–π–ª–æ–≤ –∏ –¥–ª–∏–Ω—ã URL

### ‚ùå –ú–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å (–Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
- ‚ùå –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ URL parsing (–æ—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
**–ì–æ—Ç–æ–≤–æ!** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π:
1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (#3)
2. –†–∞—Å—à–∏—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã (#4)
3. –û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã (#6)

### –î–ª—è –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è:
1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ —Ñ–∞–π–ª–∞ (#5) - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –≥–∏–±–∫–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ –ø–µ—Ä–µ–∫–æ–º–ø–∏–ª—è—Ü–∏–∏
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–º–µ–Ω–æ–≤ (#7) - –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**: 1 –º–∏–Ω—É—Ç–∞
- **–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**: 8-15 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**: 1-2 —á–∞—Å–∞

**–í—ã–≤–æ–¥**: –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É. –í—Å–µ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–æ–±—Å—Ç–≤–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

