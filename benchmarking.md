# Сравнение производительности Doradura с конкурентами

## Тестовое видео

**URL:** https://youtu.be/ymFWgFiKUvM

## Метрики для сравнения

### Основные метрики

1. **Время от запроса до начала загрузки** (Queue Time)
   - Время от момента отправки команды боту до начала обработки задачи
   - Измеряется в секундах

2. **Время скачивания** (Download Time)
   - Время от начала загрузки до завершения скачивания файла
   - Измеряется в секундах

3. **Время отправки пользователю** (Upload Time)
   - Время от завершения скачивания до момента получения файла пользователем
   - Измеряется в секундах

4. **Общее время** (Total Time)
   - Суммарное время от запроса до получения файла
   - Измеряется в секундах

5. **Размер файла**
   - Размер скачанного файла в мегабайтах
   - Формат: MP3/MP4

6. **Качество**
   - Качество предоставленного файла
   - Для аудио: битрейт (kbps)
   - Для видео: разрешение (p)

## Участники тестирования

### 1. Doradura (наш бот)
- **Команда:** `/download https://youtu.be/ymFWgFiKUvM`
- **Форматы:** MP3, MP4
- **Особенности:** Очередь, rate limiting, приоритеты по планам

### 2. @youtubednbot
- **Команда:** `/start` → выбор формата → вставка ссылки
- **Форматы:** MP3, MP4, различные качества

### 3. @YTfinderbot
- **Команда:** `/start` → вставка ссылки → выбор формата
- **Форматы:** MP3, MP4, различные качества

## Процедура тестирования

### Подготовка

1. Убедитесь, что все боты запущены и доступны
2. Подготовьте секундомер или используйте системное время
3. Зафиксируйте начальное состояние сети (ping, скорость)

### Выполнение теста

#### Тест 1: Скачивание MP3 (320 kbps)

**Doradura:**
```
1. Отправка команды: /download https://youtu.be/ymFWgFiKUvM
2. Выбор формата: MP3, битрейт: 320k
3. Замер времени:
   - T1: Время получения ответа "Добавлено в очередь"
   - T2: Время начала обработки (статус "processing")
   - T3: Время получения файла
   - Total = T3 - T1
```

**Конкуренты:**
```
1. Отправка команды боту
2. Выбор формата MP3 (если требуется)
3. Замер времени:
   - T1: Время получения первого ответа
   - T2: Время получения файла
   - Total = T2 - T1
```

#### Тест 2: Скачивание MP4 (1080p)

**Doradura:**
```
1. Отправка команды: /download https://youtu.be/ymFWgFiKUvM
2. Выбор формата: MP4, качество: 1080p
3. Замер времени (аналогично тесту 1)
```

**Конкуренты:**
```
1. Отправка команды боту
2. Выбор формата MP4, качество 1080p
3. Замер времени
```

### Количество итераций

- **Минимум:** 3 теста для каждого бота и формата
- **Рекомендуется:** 5-10 тестов для статистической значимости
- **Условия:** Тесты проводятся в разное время суток для учета нагрузки

## Результаты тестирования

### Тест 1: MP3 (320 kbps)

| Бот | Queue Time (с) | Download Time (с) | Upload Time (с) | Total Time (с) | Размер (MB) | Примечания |
|-----|----------------|-------------------|-----------------|----------------|-------------|------------|
| **Doradura** | — | — | — | — | — | — |
| @youtubednbot | — | — | — | — | — | — |
| @YTfinderbot | — | — | — | — | — | — |

**Средние значения (после 5+ тестов):**

| Бот | Средний Total Time (с) | Стандартное отклонение | Мин. время | Макс. время |
|-----|------------------------|------------------------|-----------|-------------|
| **Doradura** | — | — | — | — |
| @youtubednbot | — | — | — | — |
| @YTfinderbot | — | — | — | — |

### Тест 2: MP4 (1080p)

| Бот | Queue Time (с) | Download Time (с) | Upload Time (с) | Total Time (с) | Размер (MB) | Примечания |
|-----|----------------|-------------------|-----------------|----------------|-------------|------------|
| **Doradura** | — | — | — | — | — | — |
| @youtubednbot | — | — | — | — | — | — |
| @YTfinderbot | — | — | — | — | — | — |

**Средние значения (после 5+ тестов):**

| Бот | Средний Total Time (с) | Стандартное отклонение | Мин. время | Макс. время |
|-----|------------------------|------------------------|-----------|-------------|
| **Doradura** | — | — | — | — |
| @youtubednbot | — | — | — | — |
| @YTfinderbot | — | — | — | — |

## Дополнительные метрики

### Надежность

| Бот | Успешных загрузок | Ошибок | Процент успеха |
|-----|-------------------|--------|----------------|
| **Doradura** | — | — | — |
| @youtubednbot | — | — | — |
| @YTfinderbot | — | — | — |

### Пользовательский опыт

| Бот | Понятность команд | Скорость ответа | Информативность |
|-----|-------------------|-----------------|-----------------|
| **Doradura** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| @youtubednbot | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |
| @YTfinderbot | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

## Автоматизация тестирования

### Скрипт для автоматического тестирования Doradura

```bash
#!/bin/bash
# test_doradura.sh

VIDEO_URL="https://youtu.be/ymFWgFiKUvM"
BOT_TOKEN="YOUR_BOT_TOKEN"
CHAT_ID="YOUR_CHAT_ID"

echo "Тестирование Doradura..."
echo "Видео: $VIDEO_URL"
echo ""

# Тест MP3
echo "=== Тест MP3 (320kbps) ==="
START_TIME=$(date +%s)
curl -X POST "https://api.telegram.org/bot$BOT_TOKEN/sendMessage" \
  -d "chat_id=$CHAT_ID" \
  -d "text=/download $VIDEO_URL format=mp3 bitrate=320k"

# Ждем получения файла (нужно реализовать логику ожидания)
# END_TIME=$(date +%s)
# DURATION=$((END_TIME - START_TIME))
# echo "Время выполнения: ${DURATION} секунд"
```

### Ручное тестирование

Для ручного тестирования используйте следующий чеклист:

- [ ] Подготовить тестовое окружение
- [ ] Зафиксировать время начала теста
- [ ] Отправить команду боту
- [ ] Зафиксировать время получения ответа
- [ ] Зафиксировать время начала обработки (если доступно)
- [ ] Зафиксировать время получения файла
- [ ] Записать размер файла
- [ ] Проверить качество файла
- [ ] Повторить тест 4+ раза
- [ ] Вычислить средние значения

## Анализ результатов

### Ключевые выводы

1. **Скорость обработки:**
   - Какой бот быстрее обрабатывает запросы?
   - Есть ли задержки в очереди?

2. **Качество файлов:**
   - Соответствует ли качество заявленному?
   - Есть ли артефакты или проблемы?

3. **Надежность:**
   - Какой процент успешных загрузок?
   - Частота ошибок и таймаутов?

4. **Удобство использования:**
   - Простота команд
   - Информативность ответов
   - Наличие превью

### Рекомендации по улучшению

На основе результатов тестирования:

- [ ] Оптимизация очереди загрузок
- [ ] Улучшение обработки ошибок
- [ ] Добавление превью перед загрузкой
- [ ] Оптимизация скорости скачивания
- [ ] Улучшение пользовательского интерфейса

## История обновлений

### 2025-01-XX - Первый тест
- Создан файл benchmarking.md
- Определены метрики и процедуры тестирования
- Добавлены тестовые боты: @youtubednbot, @YTfinderbot

---

**Примечание:** Результаты тестирования должны обновляться регулярно для отслеживания производительности и сравнения с конкурентами.

