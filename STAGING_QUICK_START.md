# üöÄ Staging Environment - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

–¢–µ–ø–µ—Ä—å –µ—Å—Ç—å **–¥–≤–∞ –±–æ—Ç–∞**:

1. **Production** (6310079371:AAH...) - –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. **Staging** (8224275354:AAFB...) - —Ç–µ—Å—Ç–æ–≤—ã–π –±–æ—Ç –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ–∏—á

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### Production –±–æ—Ç

```bash
./run_production.sh
```

### Staging –±–æ—Ç

```bash
./run_staging.sh
```

---

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ

**–†–∞–Ω—å—à–µ:**
```
–ö–æ–¥ ‚Üí –ö–æ–º–º–∏—Ç ‚Üí Push ‚Üí Railway –¥–µ–ø–ª–æ–∏—Ç ‚Üí üò± –ë–∞–≥ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```

**–¢–µ–ø–µ—Ä—å:**
```
–ö–æ–¥ ‚Üí Staging —Ç–µ—Å—Ç ‚Üí –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí Push ‚Üí Railway ‚Üí ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–≤–æ–ª—å–Ω—ã
```

---

## –ë—ã—Å—Ç—Ä—ã–π –ø—Ä–∏–º–µ—Ä

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–π —Ñ–∏—á–∏

```bash
# 1. –ü–∏—à–∏—Ç–µ –∫–æ–¥
vim src/handlers/download.rs

# 2. –¢–µ—Å—Ç–∏—Ä—É–µ—Ç–µ –≤ staging
./run_staging.sh

# 3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ staging –±–æ—Ç–∞ –≤ Telegram
# (–Ω–∞–π–¥–∏—Ç–µ –ø–æ —Ç–æ–∫–µ–Ω—É 8224275354:AAFB...)

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç–µ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
/start
/download https://youtube.com/...

# 5. –í—Å—ë –û–ö ‚Üí –¥–µ–ø–ª–æ–∏—Ç–µ
git add .
git commit -m "feat: awesome feature"
git push

# 6. Railway –¥–µ–ø–ª–æ–∏—Ç –Ω–∞ production
```

---

## –†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É Production –∏ Staging

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Production | Staging |
|----------|-----------|---------|
| **Bot Token** | 6310079371:AAH... | 8224275354:AAFB... |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | database.sqlite (–≤ git) | database_staging.sqlite (–ª–æ–∫–∞–ª—å–Ω–æ) |
| **–ó–∞–≥—Ä—É–∑–∫–∏** | ~/downloads/dora-files | ~/downloads/dora-staging |
| **–ü–æ—Ä—Ç webapp** | 8080 | 8081 |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** | –†–µ–∞–ª—å–Ω—ã–µ | –¢–µ—Å—Ç–æ–≤—ã–µ |

---

## –ö–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫

```bash
# Production
./run_production.sh

# Staging
./run_staging.sh
```

### –û—á–∏—Å—Ç–∫–∞ staging –¥–∞–Ω–Ω—ã—Ö

```bash
# –£–¥–∞–ª–∏—Ç—å staging –ë–î
rm database_staging.sqlite

# –û—á–∏—Å—Ç–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏
rm -rf ~/downloads/dora-staging/*
```

### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ production –¥–∞–Ω–Ω—ã—Ö –≤ staging (–¥–ª—è —Ç–µ—Å—Ç–∞ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏)

```bash
cp database.sqlite database_staging.sqlite
./run_staging.sh
```

---

## –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å

‚ùå **–ù–ï –¥–µ–ø–ª–æ–π—Ç–µ –Ω–∞ production –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ staging**
```bash
# –ü–ª–æ—Ö–æ
git commit -m "feat: untested feature"
git push  # ‚Üí –°—Ä–∞–∑—É –Ω–∞ production
```

‚úÖ **–°–Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç, –ø–æ—Ç–æ–º –¥–µ–ø–ª–æ–π**
```bash
# –•–æ—Ä–æ—à–æ
./run_staging.sh  # ‚Üí –¢–µ—Å—Ç
# –ü—Ä–æ–≤–µ—Ä–∫–∞
git push  # ‚Üí –î–µ–ø–ª–æ–π
```

---

## –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ß–∏—Ç–∞–π—Ç–µ [STAGING_ENVIRONMENT.md](STAGING_ENVIRONMENT.md) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –≥–∞–π–¥–∞.

---

**Staging –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º.
